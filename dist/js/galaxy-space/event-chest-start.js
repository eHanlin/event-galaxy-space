"use strict";define(["jquery","ajax","confirmPopup","eventChestStatusDo","w3","eventChestInspection","eventAwardAreZero"],function(n,t,a,e,i,s,c){return function(d,o){var r=void 0;r=d.level>=2?'\n          <div class="start-confirm-grid-container">\n            <div class="content-block1">\n              <span>寶箱準備啟動中...</span>\n            </div>\n            <div class="content-block2">\n              <span>目前寶箱等級為Lv'+d.level+'，開啟這個寶箱可能獲得</span>\n            </div>  \n            <div class="img-block-left-btn">\n              <img class="left-btn" src="https://d220xxmclrx033.cloudfront.net/event-space/img/previous.png">\n            </div>\n            <div class="img-block-right-btn">\n              <img class="right-btn" src="https://d220xxmclrx033.cloudfront.net/event-space/img/next.png">\n            </div>\n            <div class="content-block4">\n              <span>你確定要啟動這個寶箱嗎？</span>\n            </div>\n          </div>\n        ':'\n          <div>\n            <h2 class="header-text">寶箱準備啟動中...</h2>\n            <h3>你確定要啟動這個寶箱嗎？</h3>\n          </div>\n        ';var l={confirmFn:function(){t("POST","/chest/inception/"+d.id,{status:"UNLOCKING"}).then(function(n){s(n.message,n.content)||c(n.message,n.content)||e.unLocking(d,o)})},onOpenFn:function(){d.level<2||t("GET","/chest/showAwardsWhenStart/chest"+d.level).then(function(t){var a,e=t.content,s=0,c=void 0,d=void 0,o="",r="",l=function(n,t,a,e){switch(n%t){case t-1:r+='<div class="img-block-award">'+(o+=e)+"</div>",o="";break;default:o+=e}};for(var v in s=window.matchMedia("(max-width: 500px)").matches?1:window.matchMedia("(max-width: 950px)").matches?3:5,a=Object.keys(e).length,c=0,e){var m='<div class="start-show-award">\n                  <img class="img-award'+c+'" data-award-id="'+v+'" src="https://d220xxmclrx033.cloudfront.net/event-space/img/award/'+v+'.png">\n                </div>\n              ';c===a-1?r+='<div class="img-block-award">'+(o+=m)+"</div>":l(c,s,0,m),c++}n(".img-block-left-btn").after(r),n("img[class^=img-award]").each(function(t,a){d=n(a).attr("data-award-id"),0===e[d]&&(n(a).addClass("zero-quantity"),n(a).parent("div.start-show-award").append('<img class="award-zero" src="https://d220xxmclrx033.cloudfront.net/event-space/img/soldout.png">'))});var h=i.slideshow(".img-block-award",0);n(".start-confirm-grid-container .right-btn").on("click",function(){h.next()}),n(".start-confirm-grid-container .left-btn").on("click",function(){h.previous()})})}};a.dialog(r,l)}});