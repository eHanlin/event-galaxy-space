"use strict";define(["require","jquery","ajax","confirmPopup","eventChestInspection","eventTotalAssets"],function(n,s,e,c,i){var t=function n(s,t,a){var o,g,r,l,p,d,m,v,f=void 0,h=void 0,u=void 0,x=void 0;if(t>a-1){for(var b=[],w=0;w<s.length;w++)b.push(s[w].chestId);c.ok("",'\n          <span style="font-size:24px;">\n            哇！獲得了好多寶藏呢～記得在 7/23 之前完成資料回填，贈品將會在 7/26 開始陸續寄出。\n            <br/>下學期我們將會在魔法世界展開冒險，記得回來唷！\n            <br/>\n            <br/>\n          </span>\n        ',function(){e("POST","/chest/award/notePopupAutoOpened",b).then(function(){window.location.reload()})})}else o=s[t].chestId,g=s[t].level,r=s[t].coins,l=s[t].gems,p=s[t].gainAwardId,d=s[t].gainAward,m=s[t].luckyBag,"",f="",h="",u="",p?(f='<span class="gif-title">'+d+"</span>",h='\n            <img class="coins-img" src="https://d220xxmclrx033.cloudfront.net/event-space/img/coin.svg">\n            <span>'+r+'</span>\n            <img class="gems-img" src="https://d220xxmclrx033.cloudfront.net/event-space/img/gem.svg">\n            <span>'+l+"</span>\n          ",u='<img class="your-award-gif" src="https://d220xxmclrx033.cloudfront.net/event-space/img/award/'+p+'.png">'):u='\n            <img class="coins-img-lg" src="https://d220xxmclrx033.cloudfront.net/event-space/img/coin.svg">\n            <span class="coins-lg">'+r+'</span>\n            <br/>\n            <img class="gems-img-lg" src="https://d220xxmclrx033.cloudfront.net/event-space/img/gem.svg">\n            <span class="gems-lg">'+l+"</span>\n          ",v='\n        <div class="open-confirm-grid-container">\n          <div class="open-text-block1">\n            <img class="open-gif-chest" src="https://d220xxmclrx033.cloudfront.net/event-space/img/chest/open/openChest'+g+'.gif">\n          </div>\n          <div class="open-text-block2">恭喜你獲得了\n            <span class="gif-title">'+f+'</span>\n          </div>\n          <div class="open-text-block3">\n            '+h+'\n          </div>\n          <div class="open-text-block4">\n            '+u+"\n          </div>\n        </div>\n      ",x=p&&!1===m?{confirmFn:n.bind(n,s,t+1,a),confirmBtnText:"確認",isShowCancelButton:!1}:!0===m?{confirmFn:function(){e("POST","/chest/award/luckyBag/"+o,{awardId:p,chestId:o}).then(function(e){var o,g=e.content;if(!i(e.message,e.content)){o='\n                  <div class="lucky-bag">\n                    <span>福袋打開囉，得到 </span>\n                    <img class="coins-img" src="https://d220xxmclrx033.cloudfront.net/event-space/img/coin.svg">\n                    <span>'+g.coins+'</span>\n                    <img class="gems-img" src="https://d220xxmclrx033.cloudfront.net/event-space/img/gem.svg">\n                    <span>'+g.gems+"</span>\n                  </div>\n                ";var r='<img class="confirm-popup-lucky-bag" src="https://d220xxmclrx033.cloudfront.net/event-space/img/award/'+p+'.png">';c.luckyBagImage(o,r,function(){n(s,t+1,a)})}})},confirmBtnText:"打開福袋",isShowCancelButton:!1}:{confirmFn:n.bind(n,s,t+1,a),confirmBtnText:"確認",isShowCancelButton:!1},c.dialog(v,x)};e("GET","/chest/autoOpened").then(function(n){var e=n.content.length;if(e>0){var i={confirmFn:t.bind(t,n.content,0,e),confirmBtnText:"確認",isShowCancelButton:!1,onOpenFn:function(){s(".swal2-content").append('\n                  <div class="shining-block">\n                    <div class="shining-coins"></div>\n                    <div class="shining-gems"></div>\n                  </div>\n                ');for(var n=1;n<31;n++)s(".shining-block .shining-coins").append('<img class="coins'+n+'" src="https://s3-ap-northeast-1.amazonaws.com/ehanlin-web-resource/event-space/img/coinGif.gif">');for(var e=1;e<21;e++)s(".shining-block .shining-gems").append('<img class="gems'+e+'" src="https://s3-ap-northeast-1.amazonaws.com/ehanlin-web-resource/event-space/img/gemGif.gif">')}};c.dialog('\n            <span style="font-size:24px;">\n              經過一年的努力，我們終於在銀河中找到一片適合安定下來的土地，在這片土地上，\n              <br/>有一些厲害的魔法師居住著，透過他們的魔法將封存的寶箱都打開啦!趕快來看看你獲得了哪些寶藏吧!\n              <br/>\n              <br/>\n            </span>\n          ',i)}})});