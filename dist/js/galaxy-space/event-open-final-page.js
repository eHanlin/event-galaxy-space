"use strict";define(["require","jquery","ajax","confirmPopup","eventChestInspection","eventTotalAssets"],function(n,s,e,t,c){var a=function n(s,a,i){if(a>i-1){for(var o=[],l=0;l<s.length;l++)o.push(s[l].chestId);t.ok("",'\n      <span style="font-size:24px;">哇!獲得了好多寶藏呢~記得在7/20之前完成資料回填，贈品將會在8/6開始陸續寄出。<br>\n      下學期我們將會在魔法世界展開冒險，記得回來唷!</span>\n      <br>\n      <br>\n      <br>\n      ',function(){e("POST","/chest/award/notePopupAutoOpened",o).then(function(){window.location.reload()})})}else{var p,r=s[a].chestId,g=s[a].level,d=s[a].coins,m=s[a].gems,v=s[a].gainAwardId,x=s[a].gainAward,f=s[a].luckyBag,u="",h="",b="",k="";v?(u='<span class="gif-title">'+x+"</span>",b='\n            <img class="coins-img" src="https://d220xxmclrx033.cloudfront.net/event-space/img/coin.svg">\n            <span>'+d+'</span>\n            <img class="gems-img" src="https://d220xxmclrx033.cloudfront.net/event-space/img/gem.svg">\n            <span>'+m+"</span>\n          ",k='<img class="your-award-gif" src="https://d220xxmclrx033.cloudfront.net/event-space/img/award/'+v+'.png">'):k='\n            <img class="coins-img-lg" src="https://d220xxmclrx033.cloudfront.net/event-space/img/coin.svg">\n            <span class="coins-lg">'+d+'</span>\n            <br/>\n            <img class="gems-img-lg" src="https://d220xxmclrx033.cloudfront.net/event-space/img/gem.svg">\n            <span class="gems-lg">'+m+"</span>\n          ",p='\n          <div class="open-confirm-grid-container">\n            <div class="open-text-block1">\n              <img class="open-gif-chest" src="https://d220xxmclrx033.cloudfront.net/event-space/img/chest/open/openChest'+g+'.gif">\n            </div>\n            <div class="open-text-block2">恭喜你獲得了\n              <span class="gif-title">'+u+'</span>\n            </div>\n            <div class="open-text-block3">\n              '+b+'\n            </div>\n            <div class="open-text-block4">\n              '+k+"\n            </div>\n          </div>\n        ",v&&!1===f?t.dialog(p,{confirmFn:n.bind(n,s,a+1,i),confirmBtnText:"確認",isShowCancelButton:!1}):(!0===f&&(h="打開福袋"),t.ok("",p,function(){!0===f?e("POST","/chest/award/luckyBag/"+r,{awardId:v,chestId:r,level:g}).then(function(e){var o,l=e.content;if(!c(e.message,e.content)){o='\n                      <div class="lucky-bag">\n                        <span>福袋打開囉，得到 </span>\n                        <img class="coins-img" src="https://d220xxmclrx033.cloudfront.net/event-space/img/coin.svg">\n                        <span>'+l.coins+'</span>\n                        <img class="gems-img" src="https://d220xxmclrx033.cloudfront.net/event-space/img/gem.svg">\n                        <span>'+l.gems+"</span>\n                      </div>\n                    ";var p='<img class="confirm-popup-lucky-bag" src="https://d220xxmclrx033.cloudfront.net/event-space/img/award/'+v+'.png">';t.luckyBagImage(o,p,function(){n(s,a+1,i)})}}):n(s,a+1,i)},h))}};e("GET","/chest/autoOpened").then(function(n){var s=n.content.length,e=void 0;if(s>0){e=0,t.ok("",'\n              <span style="font-size:22px; top:150px;">\n              經過一年的努力，我們終於在銀河中找到一片適合安定下來的土地，在這片土地上，<br>有一些厲害的魔法師居住著，透過他們的魔法將封存\n              的寶箱都打開啦!趕快來看看你獲得了哪些寶藏吧!\n              </span><br><br><br>\n            ',a.bind(a,n.content,e,s),"確認")}})});